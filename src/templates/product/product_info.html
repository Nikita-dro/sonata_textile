{% extends "index.html" %}
{% block content %}
    <style>
        .delivery {
            background-color: #f2f2f2;
            border: 1px solid #ccc;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            max-width: 350px;
            width: 100%;
        }

        .delivery p {
            margin-bottom: 30px;
        }

        .tab-pane {
            display: none;
        }

        .tab-pane.active {
            display: block;
        }

        .tabs-nav a.active {
            font-weight: bold;
        }

        .vertical-line {
            position: relative;
            top: 4px;
            border-left: 2px solid gray;
            height: 20px;
            display: inline-block;
        }

        .characteristics {
            max-width: 600px;
            margin: 0 auto;
        }

        .characteristics__item {
            display: flex;
            justify-content: space-between;
            align-items: baseline;
            padding: 5px 0;
            border-bottom: 1px solid #ccc;
        }

        .characteristics__name {
            flex: 1;
        }

    </style>
    <div style="display: flex; align-items: center; justify-content: space-between; margin-top: 20px;">
        <div style="flex-shrink: 0;">
            <ul>
                <p>
                    {% if product.avatar %}
                        <img src="{{ product.avatar.url }}" alt="product photo" width="400">
                    {% else %}
                        No photo
                    {% endif %}
                </p>
            </ul>
        </div>
        <div style="flex-grow: 1">
            <ul>
                <p>–ê—Ä—Ç–∏–∫—É–ª: {{ product.article }}</p>
                <p style="font-size: 2rem;"><strong>{{ product.name }}</strong></p>
                <p style="color: #009688;">–¶—ñ–Ω–∞: <strong style="font-size: 2rem;">{{ product.price.amount }}</strong>
                    –≥—Ä–Ω</p>
                <p>–ù–∞—è–≤–Ω—ñ—Å—Ç—å:
                    {% if product.availability is True %}
                        <span style="color: #009688; font-size: 1.5rem; margin-left: 5px;">–Ñ –≤ –Ω–∞—è–≤–Ω–æ—Å—Ç—ñ</span>
                    {% else %}
                        <span style="color: red; font-size: 1.5rem; margin-left: 5px;">–ù–µ–º–∞—î –≤ –Ω–∞—è–≤–Ω–æ—Å—Ç—ñ</span>
                    {% endif %}
                </p>
            </ul>
            {% if product.availability == True %}
                <div class="d-flex justify-content-center">
                    <a class="btn btn-outline-secondary" style="margin-top: 10px; margin-right: 275px;" href="#">–î–æ–¥–∞—Ç–∏
                        –≤ –∫–æ—à–∏–∫</a>
                </div>
            {% endif %}
        </div>
        <div class="delivery"><p><strong>üá∫üá¶ Sonata Textile</strong> –≤–∂–µ –±—ñ–ª—å—à–µ 25 —Ä–æ–∫—ñ–≤ —Ä–∞–¥—É—î –≤–∞—Å —è–∫—ñ—Å–Ω–∏–º
            —Ç–µ–∫—Å—Ç–∏–ª–µ–º</p>
            <p>üí≥–ú–∏ –ø—Ä–∏–π–º–∞—î–º–æ –æ–ø–ª–∞—Ç—É –∫–∞—Ä—Ç–∫–∞–º–∏ <strong>Visa/Mastercard –∞–±–æ –Ω–∞–ª–æ–∂–µ–Ω–∏–π
                –ø–ª–∞—Ç—ñ–∂</strong> –ø—Ä–∏ –æ—Ç—Ä–∏–º–∞–Ω–Ω—ñ
                –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è</p>
            <p>üöö –ë–µ–∑–∫–æ—à—Ç–æ–≤–Ω–∞ –¥–æ—Å—Ç–∞–≤–∫–∞ –ø—Ä–∏ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—ñ –Ω–∞ —Å—É–º–º—É <strong>1500 –≥—Ä–Ω. —Ç–∞ –≤–∏—â–µ</strong></p>
        </div>
    </div>
    <div class="product-desc" style="margin-top: 20px;">
        <ul class="tabs-nav">
            <li><a href="#" onclick="showTab('tab-characteristics', this)" class="active">–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏</a></li>
            <li><span class="vertical-line"></span></li>
            <li><a href="#" onclick="showTab('tab-desc', this)">–û–ø–∏—Å</a></li>
        </ul>

        <div class="tab-content">
            <div class="tab-pane" id="tab-desc"><p itemprop="description">{{ product.description }}</p></div>
            <div class="tab-pane active" id="tab-characteristics">
                <div class="characteristics">
                    <div class="characteristics__item">
                        <div class="characteristics__name">–†–æ–∑–º—ñ—Ä</div>
                        <div class="characteristics__val">{{ product.size }}</div>
                    </div>
                    <div class="characteristics__item">
                        <div class="characteristics__name">–ú–∞—Ç–µ—Ä—ñ–∞–ª</div>
                        <div class="characteristics__val">{{ product.material.name }}</div>
                    </div>
                    <div class="characteristics__item">
                        <div class="characteristics__name">–ë—Ä–µ–Ω–¥</div>
                        {% if product.brand == None %}
                            <div class="characteristics__val">–ë–µ–∑ –±—Ä–µ–Ω–¥—É</div>
                        {% else %}
                            <div class="characteristics__val">{{ product.brand.name }}</div>
                        {% endif %}
                    </div>
                    <div class="characteristics__item">
                        <div class="characteristics__name">–ö—Ä–∞—ó–Ω–∞ –≤–∏—Ä–æ–±–Ω–∏—Ü—Ç–≤–∞</div>
                        <div class="characteristics__val">{{ product.producing_country.name }}</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="container" style="margin-bottom: 30px; margin-top: 10px;">
        <ul class="tabs-nav">
            <li data-tab="tab-discount" class="active"><a href="#">–¢–æ–ø –ø—Ä–æ–¥–∞–∂—ñ–≤</a></li>
        </ul>
        <div id="carouselExampleDark" class="carousel carousel-dark slide" data-bs-touch="false"
             data-bs-interval="5000" data-bs-ride="carousel">
            <div class="carousel-inner">
                {% if products %}
                    {% for product in products %}
                        {% if forloop.counter0|divisibleby:4 %}
                            <div class="carousel-item {% if forloop.first %}active{% endif %}">
                            <div class="row justify-content-center">
                        {% endif %}

                    <div class="col-md-3 mb-3">
                        <a href="{% url 'products:product_info' product.id %}" style="text-decoration: none;">
                            <div class="card" style="width: 93%;">
                                <img src="{{ product.avatar.url }}" class="card-img-top" alt="dfgdfg"
                                     style="width: 100%; height: 270px; object-fit: cover;">
                                <div class="card-body">
                                    <h5 class="card-title"
                                        style="font-weight: bold; font-size: 1.20rem; color: black;">{{ product.name }}</h5>
                                    <p class="card-text"
                                       style="margin-bottom: 5px; font-style: italic; color: black;">
                                        –ê—Ä—Ç–∏–∫—É–ª: {{ product.article }}</p>
                                    <p class="card-text"
                                       style="margin-bottom: 5px; font-style: italic; color: black;">
                                        –¶—ñ–Ω–∞: {{ product.price.amount }} –≥—Ä–Ω</p>
                                    <p class="card-text" style="font-style: italic; color: black;">
                                        –†–æ–∑–º—ñ—Ä: {{ product.size }}</p>
                                    {% if product.availability == True %}
                                        <div class="d-flex justify-content-center">
                                            <a class="btn btn-outline-secondary" style="margin-top: 10px;"
                                               href="#">–î–æ–¥–∞—Ç–∏
                                                –≤ –∫–æ—à–∏–∫</a>
                                        </div>
                                    {% else %}
                                        <p class="card-text"
                                           style="font-weight: bold; color: red; text-align: center; margin-bottom: 13px;">
                                            –ù–µ–º–∞—î –≤
                                            –Ω–∞—è–≤–Ω–æ—Å—Ç—ñ</p>
                                    {% endif %}
                                </div>
                            </div>
                        </a>
                    </div>

                    {% if forloop.counter|divisibleby:4 %}
                        </div>
                        </div>
                    {% endif %}
                    {% endfor %}

                    {% if not forloop.last %}
                        </div>
                        </div>
                    {% endif %}
                {% else %}
                    <p>No products found.</p>
                {% endif %}
    </div>
    <div class="carousel-controls">
        <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleDark"
                data-bs-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Previous</span>
        </button>
        <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleDark"
                data-bs-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Next</span>
        </button>
    </div>
    <script>
        function showTab(tabId, link) {
            var tabs = document.querySelectorAll('.tab-pane');
            tabs.forEach(function (tab) {
                tab.classList.remove('active');
            });

            var targetTab = document.getElementById(tabId);
            targetTab.classList.add('active');

            var tabLinks = document.querySelectorAll('.tabs-nav a');
            tabLinks.forEach(function (tabLink) {
                tabLink.classList.remove('active');
            });

            link.classList.add('active');
        }
    </script>
{% endblock content %}